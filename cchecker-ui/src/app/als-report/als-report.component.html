<h2>
    ALS Report
</h2>
<div class="alert alert-danger" role="alert" *ngIf="!reportData['cccForms'].length">
    Please select forms and try again.
</div>
<ng-container *ngIf="reportData['cccForms'].length">
<div>
    <form #f="ngForm">
        <span class="reportHeader">
            <button class="btn btn-primary">Generate excel. Call 4807 url</button>
        </span>
        <span class="reportHeader">
            <label for="raveFormOid">Rave Form Oid</label>
            <select name="raveForm" id="raveFormOid" ngModel (change)="changeForm(f.value.raveForm)">
                <option value="" disabled>Select a form</option>
                <option *ngFor="let form of reportData.cccForms | formListsort:'raveFormOid'" [ngValue]="form">
                    {{form.raveFormOid}}
                </option>
            </select>
        </span>
    </form>                
</div>

    <table datatable [dtOptions]="dtOptions" class="display compact" *ngIf="reportData as r">
        <thead>
            <tr>
                <th>CDE Congruency Checker Report for</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr><td>Rave Protocol name </td><td>{{r.raveProtocolName}}</td></tr>
            <tr><td>Rave Protocol number </td><td>{{r.raveProtocolNumber}}</td></tr>
            <tr><td>Date Validated </td><td>{{r.reportDate}}</td></tr>
            <tr><td># Forms in protocol </td><td>{{r.totalFormsCount}}</td></tr>
            <tr><td># Total Forms Congruent </td><td>{{congruentFormTotal}}</td></tr>
            <tr><td># Total Questions Checked </td><td>{{r.countQuestionsChecked}}</td></tr>
            <tr><td># Total Questions with Warnings </td><td>{{r.countQuestionsWithWarnings}}</td></tr>
            <tr><td># Total Questions with Errors </td><td>{{r.countQuestionsWithErrors}}</td></tr>
            <tr><td># Total Questions without associated CDE </td><td>{{r.countQuestionsWithoutCde}}</td></tr>
            <tr><td># Required NRDS Questions missing  </td><td>{{r.countNrdsMissing}}</td></tr>
            <tr><td># Required NRDS Questions Congruent </td><td>{{r.countNrdsCongruent}}</td></tr>
            <tr><td># Required NRDS Questions With Warnings </td><td>{{r.countNrdsWithWarnings}}</td></tr>
            <tr><td># Required NRDS Questions With Errors </td><td>{{r.countNrdsWithErrors}}</td></tr>
            <tr><td># NCI Standard Template Mandatory Modules Questions not used in Protocol  </td><td></td></tr>
            <tr><td># NCI Standard Template Mandatory Modules Questions Congruent </td><td>{{r.countNciCongruent}}</td></tr>
            <tr><td># NCI Standard Template Mandatory Modules Questions With Errors </td><td>{{r.countQuestionsWithErrors}}</td></tr>
            <tr><td># NCI Standard Template Mandatory Modules Questions With Warnings </td><td>{{r.countQuestionsWithWarnings}}</td></tr>
        </tbody>
    </table>

</ng-container>
